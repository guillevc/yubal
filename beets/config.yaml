---
directory: ../data
library: ./beets.db

include:
  - secrets.yaml

plugins: fetchart embedart fromfilename spotify zero lastgenre

threaded: yes
asciify_paths: true

ui:
  color: no

paths:
  default: "%asciify{$albumartist}/$year - %asciify{$album}%aunique{}/$track - %asciify{$title}"
  singleton: Non-Album/%asciify{$artist} - %asciify{$title}
  comp: Compilations/%asciify{$album}%aunique{}/$track - %asciify{$title}
  albumtype_soundtrack: Soundtracks/%asciify{$album}%aunique{}/$track - %asciify{$title}

import:
  write: yes
  move: yes
  quiet: yes
  quiet_fallback: asis
  duplicate_action: remove
  log: ./beets_import.log

# Relaxed matching for YouTube rips
match:
  strong_rec_thresh: 0.10
  medium_rec_thresh: 0.25
  rec_gap_thresh: 0.25
  max_rec:
    missing_tracks: medium
    unmatched_tracks: medium
  ignored: [missing_tracks, track_length, unmatched_tracks, track_index]
  track_length_grace: 10
  track_length_max: 30
  # Ignore album artist (unreliable from YouTube), use track artist for matching
  distance_weights:
    artist: 0.0        # Album artist - ignore
    track_artist: 1.0  # Track artist - moderate weight (now clean from artists.0)

fetchart:
  auto: yes
  sources: filesystem coverart itunes amazon albumart

embedart:
  auto: yes

# Spotify as primary metadata source
spotify:
  data_source_mismatch_penalty: 0.0
  search_limit: 10

lastgenre:
  auto: yes
  source: album
  force: yes

# Strip unwanted tags, keep only essentials
zero:
  auto: yes
  keep_fields: title artist album albumartist track tracktotal disc disctotal year month day label genre genres images
